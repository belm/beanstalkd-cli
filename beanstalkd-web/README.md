# Beanstalkd Web UI ç®¡ç†åå°

[ğŸ‡¨ğŸ‡³ ä¸­æ–‡ç‰ˆ](README.md) | [ğŸ‡ºğŸ‡¸ English](README-EN.md)

ä¸€ä¸ªç°ä»£åŒ–ã€ç¾è§‚ã€æ˜“ç”¨çš„ Beanstalkd Web ç®¡ç†ç•Œé¢ã€‚

## âœ¨ ç‰¹æ€§

- ğŸ¨ **ç°ä»£åŒ–è®¾è®¡** - ä½¿ç”¨ Tailwind CSSï¼Œå“åº”å¼å¸ƒå±€
- ğŸ“Š **å®æ—¶ç»Ÿè®¡** - æœåŠ¡å™¨å’Œ Tube çš„å®æ—¶ç»Ÿè®¡ä¿¡æ¯
- ğŸ”„ **è‡ªåŠ¨åˆ·æ–°** - æ¯10ç§’è‡ªåŠ¨æ›´æ–°æ•°æ®
- ğŸ¯ **å®Œæ•´åŠŸèƒ½** - æ”¯æŒæ‰€æœ‰å¸¸ç”¨ Beanstalkd æ“ä½œ
- ğŸŒˆ **å‹å¥½ç•Œé¢** - ç›´è§‚çš„æ“ä½œæµç¨‹å’Œè§†è§‰åé¦ˆ
- ğŸ“± **ç§»åŠ¨ç«¯é€‚é…** - å®Œç¾æ”¯æŒç§»åŠ¨è®¾å¤‡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¡®ä¿ Beanstalkd æœåŠ¡è¿è¡Œ

```bash
# é»˜è®¤è¿æ¥åˆ° 127.0.0.1:11300
```

### 2. å¯åŠ¨ Web æœåŠ¡å™¨

```bash
cd beanstalkd-web
go run server.go
```

### 3. è®¿é—®ç®¡ç†åå°

æ‰“å¼€æµè§ˆå™¨è®¿é—®: **http://localhost:8080**

## ğŸ“‹ åŠŸèƒ½è¯´æ˜

### 1. Tubes ç®¡ç†
- æŸ¥çœ‹æ‰€æœ‰ Tubes åˆ—è¡¨
- æŸ¥çœ‹æ¯ä¸ª Tube çš„è¯¦ç»†ç»Ÿè®¡
- å®æ—¶ç›‘æ§å„ Tube çš„ä»»åŠ¡çŠ¶æ€

### 2. ä»»åŠ¡ç®¡ç†
- é€‰æ‹© Tube æŸ¥çœ‹ä»»åŠ¡ç»Ÿè®¡
- æŸ¥çœ‹å°±ç»ªã€é¢„ç•™ã€åŸ‹è‘¬ã€å»¶è¿Ÿä»»åŠ¡æ•°é‡
- å¿«é€Ÿåˆ‡æ¢åˆ°æ“ä½œä¸­å¿ƒè¿›è¡Œæ“ä½œ

### 3. æ“ä½œä¸­å¿ƒ

#### æ’å…¥ä»»åŠ¡
- é€‰æ‹© Tube
- è¾“å…¥ä»»åŠ¡æ•°æ®
- è®¾ç½®ä¼˜å…ˆçº§å’Œå»¶è¿Ÿ
- ä¸€é”®æ’å…¥

#### é¢„ç•™ä»»åŠ¡
- ä»æŒ‡å®š Tube é¢„ç•™ä»»åŠ¡
- è®¾ç½®è¶…æ—¶æ—¶é—´
- æŸ¥çœ‹é¢„ç•™çš„ä»»åŠ¡è¯¦æƒ…

#### åˆ é™¤ä»»åŠ¡
- è¾“å…¥ä»»åŠ¡ ID
- ç¡®è®¤åˆ é™¤

#### è¸¢å‡ºä»»åŠ¡
- æ‰¹é‡è¸¢å‡ºè¢«åŸ‹è‘¬æˆ–å»¶è¿Ÿçš„ä»»åŠ¡
- è®¾ç½®è¸¢å‡ºæ•°é‡

### 4. æœåŠ¡å™¨ç»Ÿè®¡
- æŸ¥çœ‹å®Œæ•´çš„æœåŠ¡å™¨ç»Ÿè®¡ä¿¡æ¯
- æ‰€æœ‰æŒ‡æ ‡ä¸€ç›®äº†ç„¶
- å®æ—¶æ›´æ–°

## ğŸ¨ ç•Œé¢é¢„è§ˆ

### ä¸»é¡µé¢
- **é¡¶éƒ¨ç»Ÿè®¡å¡ç‰‡**: å¿«é€ŸæŸ¥çœ‹å…³é”®æŒ‡æ ‡
- **æ ‡ç­¾é¡µå¯¼èˆª**: Tubesã€ä»»åŠ¡ã€æ“ä½œã€ç»Ÿè®¡
- **å®æ—¶åˆ·æ–°**: è‡ªåŠ¨æ›´æ–°æ•°æ®

### Tubes ç®¡ç†
- **å¡ç‰‡å¼å±•ç¤º**: æ¯ä¸ª Tube çš„è¯¦ç»†ä¿¡æ¯
- **é¢œè‰²ç¼–ç **: ä¸åŒçŠ¶æ€ä½¿ç”¨ä¸åŒé¢œè‰²
- **å¿«é€Ÿæ“ä½œ**: ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…

### æ“ä½œä¸­å¿ƒ
- **å››å¤§åŠŸèƒ½åŒº**: æ’å…¥ã€é¢„ç•™ã€åˆ é™¤ã€è¸¢å‡º
- **è¡¨å•éªŒè¯**: å‹å¥½çš„è¾“å…¥æç¤º
- **å³æ—¶åé¦ˆ**: æ“ä½œç»“æœå®æ—¶æ˜¾ç¤º

## ğŸ”§ é…ç½®

### æ–¹å¼ä¸€ï¼šå‘½ä»¤è¡Œå‚æ•°ï¼ˆæ¨èï¼‰

```bash
# è‡ªå®šä¹‰ Beanstalkd åœ°å€
go run server.go -beanstalkd 192.168.1.100:11300

# è‡ªå®šä¹‰ Web ç«¯å£
go run server.go -port 9090

# åŒæ—¶è‡ªå®šä¹‰
go run server.go -beanstalkd 192.168.1.100:11300 -port 9090

# æŸ¥çœ‹å¸®åŠ©
go run server.go -h
```

### æ–¹å¼äºŒï¼šç¯å¢ƒå˜é‡

```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export BEANSTALKD_HOST=192.168.1.100:11300
export WEB_PORT=9090

# å¯åŠ¨æœåŠ¡å™¨
go run server.go
```

### æ–¹å¼ä¸‰ï¼šä½¿ç”¨é»˜è®¤å€¼

```bash
# ç›´æ¥å¯åŠ¨ï¼ˆä½¿ç”¨é»˜è®¤é…ç½®ï¼‰
# Beanstalkd: 127.0.0.1:11300
# Web ç«¯å£: 8080
go run server.go
```

### é…ç½®ä¼˜å…ˆçº§

**å‘½ä»¤è¡Œå‚æ•° > ç¯å¢ƒå˜é‡ > é»˜è®¤å€¼**

## ğŸ“¦ æŠ€æœ¯æ ˆ

### å‰ç«¯
- **HTML5** - ç»“æ„
- **Tailwind CSS** (CDN) - æ ·å¼
- **Font Awesome** (CDN) - å›¾æ ‡
- **åŸç”Ÿ JavaScript** - äº¤äº’é€»è¾‘

### åç«¯
- **Go** - æœåŠ¡å™¨è¯­è¨€
- **go-beanstalk** - Beanstalkd å®¢æˆ·ç«¯åº“
- **net/http** - HTTP æœåŠ¡å™¨

## ğŸ¯ API ç«¯ç‚¹

### GET /api/stats
è·å–æœåŠ¡å™¨ç»Ÿè®¡ä¿¡æ¯

**å“åº”**:
```json
{
  "stats": {
    "current-jobs-ready": "5",
    "current-jobs-reserved": "2",
    ...
  }
}
```

### GET /api/tubes
è·å–æ‰€æœ‰ Tubes

**å“åº”**:
```json
{
  "tubes": ["default", "emails", "orders"]
}
```

### GET /api/tubes/{name}/stats
è·å–æŒ‡å®š Tube çš„ç»Ÿè®¡

**å“åº”**:
```json
{
  "stats": {
    "current-jobs-ready": "3",
    "current-jobs-reserved": "1",
    ...
  }
}
```

### POST /api/put
æ’å…¥ä»»åŠ¡

**è¯·æ±‚**:
```json
{
  "tube": "default",
  "data": "task data",
  "priority": 1024,
  "delay": 0
}
```

**å“åº”**:
```json
{
  "job_id": 123
}
```

### POST /api/reserve
é¢„ç•™ä»»åŠ¡

**è¯·æ±‚**:
```json
{
  "tube": "default",
  "timeout": 5
}
```

**å“åº”**:
```json
{
  "job_id": 123,
  "data": "task data"
}
```

### POST /api/delete
åˆ é™¤ä»»åŠ¡

**è¯·æ±‚**:
```json
{
  "job_id": 123
}
```

### POST /api/kick
è¸¢å‡ºä»»åŠ¡

**è¯·æ±‚**:
```json
{
  "tube": "default",
  "bound": 10
}
```

**å“åº”**:
```json
{
  "kicked": 5
}
```

## ğŸ” å®‰å…¨æç¤º

âš ï¸ **é‡è¦**: æ­¤ç®¡ç†åå°æ²¡æœ‰å†…ç½®è®¤è¯æœºåˆ¶ï¼Œè¯·æ³¨æ„ï¼š

1. ä¸è¦æš´éœ²åˆ°å…¬ç½‘
2. ä»…åœ¨å—ä¿¡ä»»çš„ç½‘ç»œä¸­ä½¿ç”¨
3. å¦‚éœ€å…¬ç½‘è®¿é—®ï¼Œè¯·é…ç½®åå‘ä»£ç†å’Œè®¤è¯
4. ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ HTTPS

## ğŸš€ ç”Ÿäº§éƒ¨ç½²

### ä½¿ç”¨ systemd

åˆ›å»ºæœåŠ¡æ–‡ä»¶ `/etc/systemd/system/beanstalkd-web.service`:

```ini
[Unit]
Description=Beanstalkd Web UI
After=network.target

[Service]
Type=simple
User=www-data
WorkingDirectory=/path/to/beanstalkd-cli/beanstalkd-web
ExecStart=/usr/local/go/bin/go run server.go
Restart=on-failure

[Install]
WantedBy=multi-user.target
```

å¯åŠ¨æœåŠ¡:
```bash
sudo systemctl enable beanstalkd-web
sudo systemctl start beanstalkd-web
```

### ä½¿ç”¨ Nginx åå‘ä»£ç†

```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

## ğŸ“ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½

1. **æ·»åŠ  API ç«¯ç‚¹** - åœ¨ `server.go` ä¸­æ·»åŠ å¤„ç†å‡½æ•°
2. **æ›´æ–°å‰ç«¯** - åœ¨ `app.js` ä¸­æ·»åŠ ç›¸åº”çš„ JavaScript å‡½æ•°
3. **æ›´æ–° UI** - åœ¨ `index.html` ä¸­æ·»åŠ ç•Œé¢å…ƒç´ 

### è°ƒè¯•

å¯ç”¨è¯¦ç»†æ—¥å¿—:
```go
log.SetFlags(log.LstdFlags | log.Lshortfile)
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License
